{% extends 'base.html' %}
{% load static %}

{% block content %}



        <!-- Masthead-->
        <!-- <header class="masthead">
            <div class="container h-100">
                <div class="row h-100 align-items-center justify-content-center text-center">
                    <div class="col-lg-10 align-self-end">
                        <h1 class="text-uppercase text-white font-weight-bold">Your Favorite Source of Free Bootstrap Themes</h1>
                        <hr class="divider my-4" />
                    </div>
                    <div class="col-lg-8 align-self-baseline">
                        <p class="text-white-75 font-weight-light mb-5">Start Bootstrap can help you build better websites using the Bootstrap framework! Just download a theme and start customizing, no strings attached!</p>
                        <a class="btn btn-primary btn-xl js-scroll-trigger" href="#about">Find Out More</a>
                    </div>
                </div>
            </div>
        </header> -->
        


    <!-- Masthead-->
    <header class="masthead">
        <div class="container h-100">
            <div class="d-flex justify-content-center row h-100">
                <div class="row h-100 w-50 text-start">
                    
                    <div class="container d-flex align-items-center justify-content-center">
                    <div class="container">

                        <p class="text-white-75 font-weight-light mb-3" style="font-size: 23px;">내가 놓치고 있는 시간들은 얼마일까?</p>
                        <h1 class="text-uppercase text-white-90 font-weight-normal mb-4" style="font-size: 50px; color: black;">타임캐쳐,<br>더 나은<br>내일을 위한 선택</h1>


                        <!-- <a class="btn btn-warning btn-xl js-scroll-trigger" id="startbtn" >시작하기</a> -->
                        <!-- <a class="btn btn-warning btn-xl js-scroll-trigger" id="pausebtn" >일시정지</a> -->
                        <!-- <a class="btn btn-warning btn-xl js-scroll-trigger" id="stopbtn" >정지</a> -->
                        
                        <button type="button" class="btn btn-light" id="startbtn" >
                          <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check-circle" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                            <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/>
                          </svg>
                          시작하기
                        </button>


                        <button type="button" class="btn btn-light" id="pausebtn" >
                          <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-pause-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"/>
                          </svg>
                          일시정지
                        </button>

                        <button type="button" class="btn btn-light" id="stopbtn" >
                          <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check-circle-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                          </svg>
                          저장하기
                        </button>

                        


                        
                        

                    </div>
                    </div>

                </div>

                <div class="row h-100 w-50 text-start justify-content-center">
                    <div class="d-flex align-self-center">
                        <div class="card-body text-center">

                          <button type="button" class="btn btn-lg btn-light" disabled>나의 시간</button>

                          <!-- <a class="btn-outline-light">오늘 저장한 시간은 {{sum}}</a> -->

                        <div id='box' class="box">
                            <div id='timerBox' class="timerBox">
                                <div id="time" class="time">00:00:00</div>
                            </div>
                        </div>


                            <!-- <div class="chart-pie pt-4 pb-2">
                            <canvas id="myPieChart"></canvas>
                            </div> -->

                        </div>
                    </div>
                </div>




            </div>
        </div>



        <!-- Core theme JS-->
        <script src="{% static 'js/scripts.js' %}"></script>
        <!-- Page level plugins -->





    </header>

<script>

// Set new default font family and font color to mimic Bootstrap's default styling
Chart.defaults.global.defaultFontFamily = 'Nunito', '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
Chart.defaults.global.defaultFontColor = '#858796';

$("#pausebtn").hide();
$("#stopbtn").hide();


window.onload = function() { 
  document.getElementById('startbtn').onclick = function() { 
    $("#startbtn").hide();
    $("#pausebtn").show();
    $("#stopbtn").show();
  } 
  document.getElementById('pausebtn').onclick = function() { 
    $("#startbtn").show();
    $("#pausebtn").hide();
    $("#stopbtn").show();
  } 
  // document.getElementById('stopbtn').onclick = function() { 
  //   $("#startbtn").show();
  //   $("#pausebtn").show();
  //   $("#stopbtn").hide();
  // } 저장하면 어차피 새로고침이니까 주석처리
};


// var a = "{{sum}}";

// var b = Number(a)

// Pie Chart Example
// var ctx = document.getElementById("myPieChart");
// var myPieChart = new Chart(ctx, {
//   type: 'doughnut',
//   data: {
//     labels: ["Direct", "Referral", "Social"],
//     datasets: [{
//       data: [b, 50],
//       backgroundColor: ['#4e73df', '#1cc88a', '#36b9cc'],
//       hoverBackgroundColor: ['#2e59d9', '#17a673', '#2c9faf'],
//       hoverBorderColor: "rgba(234, 236, 244, 1)",
//     }],
//   },
//   options: {
//     maintainAspectRatio: false,
//     tooltips: {
//       backgroundColor: "rgb(255,255,255)",
//       bodyFontColor: "#858796",
//       borderColor: '#dddfeb',
//       borderWidth: 1,
//       xPadding: 15,
//       yPadding: 15,
//       displayColors: false,
//       caretPadding: 10,
//     },
//     legend: {
//       display: false
//     },
//     cutoutPercentage: 80,
//   },
// });

// stop
var time = 0;
var starFlag = true;
$(document).ready(function(){
  buttonEvt();
});

function init(){
  document.getElementById("time").innerHTML = "00:00:00";
}

function buttonEvt(){
  var hour = 0;
  var min = 0;
  var sec = 0;
  var timer;

  // start btn
  $("#startbtn").click(function(){

    if(starFlag){
      $(".fa").css("color","#FAED7D")
      this.style.color = "#4C4C4C";
      starFlag = false;

      if(time == 0){
        init();
      }

      timer = setInterval(function(){
        time++;

        min = Math.floor(time/60);
        hour = Math.floor(min/60);
        sec = time%60;
        min = min%60;

        var th = hour;
        var tm = min;
        var ts = sec;
        if(th<10){
        th = "0" + hour;
        }
        if(tm < 10){
        tm = "0" + min;
        }
        if(ts < 10){
        ts = "0" + sec;
        }

        document.getElementById("time").innerHTML = th + ":" + tm + ":" + ts;
      }, 1000);
    }
  });

  // pause btn
  $("#pausebtn").click(function(){
    if(time != 0){
      $(".fa").css("color","#FAED7D")
      this.style.color = "#4C4C4C";
      clearInterval(timer);
      starFlag = true;
    }
  });

  // stop btn
  $("#stopbtn").click(function(){

    if(time != 0){
      $(".fa").css("color","#FAED7D")
      this.style.color = "#4C4C4C";
      clearInterval(timer);
      starFlag = true;

      $.ajax({
        type: "POST",
        url: "{% url 'timesave' %}",
        data: { 'csrfmiddlewaretoken': '{{ csrf_token }}', 'time': time },
        dataType: "text",
        success:function(data){
            console.log('성공');
            location.replace("{% url 'index' %}");
        },
        error:function(request, status, error){
            console.log('실패');
            console.log(request);
            console.log(error);
        }
      });
      
      time = 0;
      init();
    }

    

  });
}


</script>
{% endblock %}
